{
  "clause_id": "C-SYNC",
  "title": "Sync Command",
  "kind": "normative",
  "status": "active",
  "text": "**Syntax:** `skc sync [<skill>] [options]`\n\nThe sync command MUST move log entries from project-local fallback databases to the primary runtime log, then delete the local fallback.\n\n**Source discovery:**\nScan `<cwd>/.skillc/logs/` for skill subdirectories containing `.skillc-meta/logs.db`. If `<skill>` is provided, sync only that skill's logs.\n\n**Destination:**\nThe primary runtime directory per [[RFC-0007:C-RESOLUTION]]. For global skills, this is typically `~/.skillc/runtime/<skill>/.skillc-meta/logs.db`.\n\n**Behavior:**\n1. For each discovered skill, copy all entries to the destination database\n2. Skip entries that already exist (idempotent safety check)\n3. After successful copy, delete the local fallback database directory\n4. If destination is not writable (e.g., sandbox still active), emit error E041 and skip that skill\n\n**Partial failure:**\nIf sync succeeds for skill A but fails for skill B, delete A's local logs and report B's error. Each skill is independent.\n\n**Options:**\n\n| Option | Description |\n|--------|-------------|\n| `--project <path>` | Sync from specified project directory instead of CWD |\n| `--dry-run` | Show what would be synced without writing or deleting |\n\n**Output:**\n\n```\nSynced 47 entries for 'rust' (local logs removed)\nSynced 12 entries for 'cuda' (local logs removed)\n```\n\nWith `--dry-run`:\n```\nWould sync 47 entries for 'rust'\nWould sync 12 entries for 'cuda'\n```\n\nIf no local logs exist:\n```\nNo local logs to sync\n```\n\n**Exit codes:**\n- 0: Success (including \"nothing to sync\")\n- 1: Error (partial or complete failure). See [[RFC-0005:C-CODES]] for error codes E040â€“E042.",
  "since": "0.1.0"
}
