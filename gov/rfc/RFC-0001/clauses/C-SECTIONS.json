{
  "clause_id": "C-SECTIONS",
  "title": "Section Listing Rules",
  "kind": "normative",
  "status": "active",
  "text": "The stub section listing (\"Top Sections\") MUST be generated according to these rules:\n\n## SKILL.md Sections\n\nFor the main `SKILL.md` file, the compiler MUST:\n- Include all H1 headings at indent level 0\n- Include H2 headings at indent level 1 (as children of the preceding H1)\n- Exclude H3 and deeper headings (too detailed for stub)\n- Limit to 15 entries; if more exist, append \"... (N more)\" indicator\n\nThe first H1 is NOT treated specially — it is included like any other H1.\n\n## Other Markdown Files\n\nFor all other `.md` files in the skill directory:\n- Group all entries under a \"References (query by title only)\" label at indent level 0\n- The hint \"(query by title only)\" clarifies that descriptions are for context only\n- Use the first H1 heading from each file at indent level 1\n- If a file has no H1 heading, use the relative file path as the label\n- If the file has frontmatter with a `description` field, append it inline after an em-dash: `- Title — description`\n- Description MUST be truncated to 120 characters with `…` if longer\n- Limit to 15 entries; if more exist, append \"... (N more)\" indicator\n- Files are listed in alphabetical order by path\n\nThe \"References\" section is only included if there are other `.md` files.\n\n## Reference File Frontmatter\n\nReference files MAY contain optional YAML frontmatter:\n\n```yaml\n---\ndescription: \"Brief description of this reference document\"\n---\n```\n\nThe `description` field:\n- Is optional (no warning if absent)\n- Should be concise (≤120 characters recommended)\n- Is displayed inline in the stub after the title\n- Is NOT part of the queryable section name\n\n## File Ordering\n\nFiles MUST be processed in this order:\n1. `SKILL.md` first (main document)\n2. Other `.md` files in alphabetical order by path\n\n## Example Output\n\n```\n## Top Sections\n\n- Rust CLI\n  - Default Flow\n  - Decision Tree\n- Advanced Topics\n  - Performance\n- References (query by title only)\n  - Clap Patterns — Advanced argument parsing examples\n  - Error Handling — anyhow vs thiserror patterns\n  - TUI Guide\n```\n\nIn this example:\n- \"Rust CLI\" and \"Advanced Topics\" are H1s from `SKILL.md`\n- \"Default Flow\", \"Decision Tree\", \"Performance\" are H2s from `SKILL.md`\n- \"References (query by title only)\" is the fixed grouping label with hint\n- \"Clap Patterns\" and \"Error Handling\" have descriptions from their frontmatter\n- \"TUI Guide\" has no description (frontmatter absent or no description field)\n- When querying, use `skc show --section \"Clap Patterns\"` (not the full line with description)\n\n*Since: v0.2.0*",
  "since": "0.2.0"
}
